# HubSDK-iOS

<p align="center">
  <img src="https://img.shields.io/badge/Swift-6.0-orange.svg" alt="Swift 6.0">
  <img src="https://img.shields.io/badge/iOS-15.0+-blue.svg" alt="iOS 15.0+">
  <img src="https://img.shields.io/badge/SPM-compatible-brightgreen.svg" alt="SPM Compatible">
  <img src="https://img.shields.io/badge/License-MIT-lightgrey.svg" alt="MIT License">
</p>

**HubSDK** â€” Ğ¼Ğ¾Ğ´ÑƒĞ»ÑŒĞ½Ñ‹Ğ¹ Swift SDK, Ğ¾Ğ±ÑŠĞµĞ´Ğ¸Ğ½ÑÑÑ‰Ğ¸Ğ¹ Ğ¿Ğ¾Ğ¿ÑƒĞ»ÑÑ€Ğ½Ñ‹Ğµ ÑĞµÑ€Ğ²Ğ¸ÑÑ‹ Ğ¼Ğ¾Ğ±Ğ¸Ğ»ÑŒĞ½Ğ¾Ğ¹ Ğ°Ğ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ¸, Ñ€ĞµĞºĞ»Ğ°Ğ¼Ñ‹ Ğ¸ Ğ¼Ğ¾Ğ½ĞµÑ‚Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ Ğ¿Ğ¾Ğ´ ĞµĞ´Ğ¸Ğ½Ñ‹Ğ¼ API. ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡Ğ°Ğ¹Ñ‚Ğµ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ñ‚Ğ¾, Ñ‡Ñ‚Ğ¾ Ğ½ÑƒĞ¶Ğ½Ğ¾.

## âœ¨ Ğ’Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸

- ğŸ”Œ **ĞœĞ¾Ğ´ÑƒĞ»ÑŒĞ½Ğ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°** â€” ĞºĞ°Ğ¶Ğ´Ğ°Ñ Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ğ² Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ğ¾Ğ¼ Ğ¼Ğ¾Ğ´ÑƒĞ»Ğµ
- â³ **Awaitable Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½** â€” Ğ¾Ğ¶Ğ¸Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ½Ğ¾ÑÑ‚Ğ¸ SDK Ğ¿ĞµÑ€ĞµĞ´ ÑÑ‚Ğ°Ñ€Ñ‚Ğ¾Ğ¼ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ
- ğŸ“¡ **Event Bus** â€” Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ°Ñ ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ¼Ğ¾Ğ´ÑƒĞ»ÑĞ¼Ğ¸
- ğŸ¯ **Swift 6 Concurrency** â€” ÑĞ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğ¹ async/await API
- ğŸ›¡ï¸ **Type-safe** â€” ÑÑ‚Ñ€Ğ¾Ğ³Ğ°Ñ Ñ‚Ğ¸Ğ¿Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¹ Ğ¸ Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº

## ğŸ“¦ ĞœĞ¾Ğ´ÑƒĞ»Ğ¸

| ĞœĞ¾Ğ´ÑƒĞ»ÑŒ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ | Ğ—Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚ÑŒ |
|--------|----------|-------------|
| `HubSDKCore` | Ğ¯Ğ´Ñ€Ğ¾ SDK, Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ğ¹ | â€” |
| `HubIntegrationCore` | Ğ‘Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğµ Ğ¿Ñ€Ğ¾Ñ‚Ğ¾ĞºĞ¾Ğ»Ñ‹ Ğ¸ Event Bus | â€” |
| `HubAppsflyer` | ĞÑ‚Ñ€Ğ¸Ğ±ÑƒÑ†Ğ¸Ñ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¾Ğº | [AppsFlyer](https://github.com/AppsFlyerSDK/AppsFlyerFramework) |
| `HubGoogleAds` | Ğ ĞµĞºĞ»Ğ°Ğ¼Ğ° (Interstitial, Rewarded, Banner, AppOpen) | [Google Mobile Ads](https://github.com/googleads/swift-package-manager-google-mobile-ads) |
| `HubSDKAdapty` | ĞŸĞ¾Ğ´Ğ¿Ğ¸ÑĞºĞ¸ Ğ¸ Paywall | [Adapty](https://github.com/adaptyteam/AdaptySDK-iOS) |
| `HubSkarb` | ĞĞ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ° Skarb | [SkarbSDK](https://github.com/bitlica/SkarbSDK-iOS) |

## ğŸ“² Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ°

### Swift Package Manager

```swift
// Package.swift
dependencies: [
    .package(url: "https://github.com/kzshifter/HubSDK-iOS", branch: "main")
]
```

Ğ˜Ğ»Ğ¸ Ğ² Xcode: **File â†’ Add Package Dependencies** â†’ Ğ²ÑÑ‚Ğ°Ğ²Ğ¸Ñ‚ÑŒ URL Ñ€ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ñ.

### ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ğ¼Ğ¾Ğ´ÑƒĞ»ĞµĞ¹

```swift
// ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡Ğ¸Ñ‚Ğµ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ½ÑƒĞ¶Ğ½Ñ‹Ğµ Ğ¼Ğ¾Ğ´ÑƒĞ»Ğ¸
.target(
    name: "YourApp",
    dependencies: [
        .product(name: "HubSDKCore", package: "HubSDK-iOS"),
        .product(name: "HubAppsflyer", package: "HubSDK-iOS"),
        .product(name: "HubSDKAdapty", package: "HubSDK-iOS"),
        .product(name: "HubGoogleAds", package: "HubSDK-iOS"),
        .product(name: "HubSkarb", package: "HubSDK-iOS"),
    ]
)
```

---

## ğŸš€ Quick Start

### Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ² AppDelegate

```swift
import UIKit
import HubSDKCore
import HubAppsflyer
import HubSDKAdapty
import HubGoogleAds
import HubSkarb

@main
class AppDelegate: UIResponder, UIApplicationDelegate {
    
    func application(
        _ application: UIApplication,
        didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?
    ) -> Bool {
        
        Task { @MainActor in
            await setupSDK(application: application)
        }
        
        return true
    }
    
    @MainActor
    private func setupSDK(application: UIApplication) async {
        // 1ï¸âƒ£ Ğ ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ¸Ñ€ÑƒĞµĞ¼ Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ğ¸
        
        // AppsFlyer â€” Ğ°Ñ‚Ñ€Ğ¸Ğ±ÑƒÑ†Ğ¸Ñ
        HubSDKCore.shared.register(
            HubAppsflyerIntegration(config: .init(
                devkey: "YOUR_APPSFLYER_DEV_KEY",
                appId: "YOUR_APPLE_APP_ID"
            )),
            awaitReady: true  // Ğ–Ğ´Ñ‘Ğ¼ conversion data
        )
        
        // Adapty â€” Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞ¸
        HubSDKCore.shared.register(
            HubAdaptyIntegration(config: .init(
                apiKey: "public_live_XXXXXX",
                placementIdentifers: ["onboarding", "settings"],
                accessLevels: [.premium]
            )),
            awaitReady: true
        )
        
        // Google Ads â€” Ñ€ĞµĞºĞ»Ğ°Ğ¼Ğ°
        HubSDKCore.shared.register(
            HubGoogleAdsIntegration(config: .init(
                interstitialKey: "ca-app-pub-xxx/xxx",
                rewardedKey: "ca-app-pub-xxx/xxx",
                appOpenKey: "ca-app-pub-xxx/xxx",
                awaitAdTypes: [.interstitial]
            )),
            awaitReady: true
        )
        
        // Skarb â€” Ğ°Ğ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ° (Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ conversion data)
        HubSDKCore.shared.register(
            HubSkarbIntegration(config: .init(
                clientId: "YOUR_SKARB_CLIENT_ID"
            ))
        )
        
        // 2ï¸âƒ£ Ğ—Ğ°Ğ¿ÑƒÑĞºĞ°ĞµĞ¼ Ğ²ÑĞµ Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ğ¸
        HubSDKCore.shared.run(with: application)
        
        // 3ï¸âƒ£ Ğ–Ğ´Ñ‘Ğ¼ Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ½Ğ¾ÑÑ‚Ğ¸
        await HubSDKCore.shared.waitUntilReady(timeout: 10)
        
        // 4ï¸âƒ£ SDK Ğ³Ğ¾Ñ‚Ğ¾Ğ² Ğº Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğµ!
        print("âœ… HubSDK initialized")
    }
}
```

---

## ğŸ“– Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ Ğ¼Ğ¾Ğ´ÑƒĞ»ĞµĞ¹

### HubSDKCore

Ğ¦ĞµĞ½Ñ‚Ñ€Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¼Ğ¾Ğ´ÑƒĞ»ÑŒ Ğ´Ğ»Ñ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸ÑĞ¼Ğ¸.

```swift
@MainActor
public class HubSDKCore {
    static let shared: HubSDKCore
    
    /// Ğ ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ¸Ñ€ÑƒĞµÑ‚ Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ
    /// - Parameters:
    ///   - integration: Ğ­ĞºĞ·ĞµĞ¼Ğ¿Ğ»ÑÑ€ Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ğ¸
    ///   - awaitReady: Ğ•ÑĞ»Ğ¸ true, waitUntilReady() Ğ±ÑƒĞ´ĞµÑ‚ Ğ¶Ğ´Ğ°Ñ‚ÑŒ ÑÑ‚Ñƒ Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ
    func register(_ integration: any StormDependencyIntegration, awaitReady: Bool = false)
    
    /// Ğ—Ğ°Ğ¿ÑƒÑĞºĞ°ĞµÑ‚ Ğ²ÑĞµ Ğ·Ğ°Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ğ¸
    func run(with application: UIApplication)
    
    /// ĞĞ¶Ğ¸Ğ´Ğ°ĞµÑ‚ Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ½Ğ¾ÑÑ‚Ğ¸ Ğ²ÑĞµÑ… awaitable Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ğ¹
    func waitUntilReady(timeout: TimeInterval = 10) async
    
    /// ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚ Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ¾ Ñ‚Ğ¸Ğ¿Ñƒ
    func integration<T: StormDependencyIntegration>(ofType type: T.Type) -> T?
}
```

---

### HubAppsflyer

Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ñ AppsFlyer Ğ´Ğ»Ñ Ğ°Ñ‚Ñ€Ğ¸Ğ±ÑƒÑ†Ğ¸Ğ¸ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¾Ğº.

#### ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ

```swift
HubAppsflyerConfiguration(
    devkey: String,              // AppsFlyer Dev Key
    appId: String,               // Apple App ID (Ğ±ĞµĞ· "id" Ğ¿Ñ€ĞµÑ„Ğ¸ĞºÑĞ°)
    waitForATT: Double = 60.0,   // ĞĞ¶Ğ¸Ğ´Ğ°Ğ½Ğ¸Ğµ ATT Ğ´Ğ¸Ğ°Ğ»Ğ¾Ğ³Ğ° (ÑĞµĞºÑƒĞ½Ğ´Ñ‹)
    debug: Bool = false          // Ğ’ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ debug Ğ»Ğ¾Ğ³Ğ¸
)
```

#### Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ

```swift
// ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ conversion data
if let appsflyer = HubSDKCore.shared.appsflyer {
    let data = appsflyer.conversionData
    
    let mediaSource = data["media_source"] as? String ?? "organic"
    let campaign = data["campaign"] as? String
    
    print("Install source: \(mediaSource)")
}
```

#### Ğ¡Ğ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ

Conversion data Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ¿ÑƒĞ±Ğ»Ğ¸ĞºÑƒĞµÑ‚ÑÑ Ñ‡ĞµÑ€ĞµĞ· Event Bus:

```swift
// Ğ’ Ğ´Ñ€ÑƒĞ³Ğ¸Ñ… Ğ¼Ğ¾Ğ´ÑƒĞ»ÑÑ… (Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€, Skarb) Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ÑÑ‚ÑÑ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸
StormEvent.conversionDataReceived([String: String])
```

---

### HubGoogleAds

Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ñ Google Mobile Ads.

#### ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ

```swift
HubGoogleAdsConfiguration(
    interstitialKey: String = "",      // Ad Unit ID
    rewardedKey: String = "",          // Ad Unit ID
    bannerKey: String = "",            // Ad Unit ID
    appOpenKey: String = "",           // Ad Unit ID
    maxRetryAttempts: Int = 2,         // ĞŸĞ¾Ğ²Ñ‚Ğ¾Ñ€Ğ½Ñ‹Ğµ Ğ¿Ğ¾Ğ¿Ñ‹Ñ‚ĞºĞ¸ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸
    awaitAdTypes: AdType = .none,      // Ğ¢Ğ¸Ğ¿Ñ‹ Ñ€ĞµĞºĞ»Ğ°Ğ¼Ñ‹ Ğ´Ğ»Ñ Ğ¾Ğ¶Ğ¸Ğ´Ğ°Ğ½Ğ¸Ñ
    awaitTimeout: TimeInterval = 10,   // Ğ¢Ğ°Ğ¹Ğ¼Ğ°ÑƒÑ‚ Ğ¾Ğ¶Ğ¸Ğ´Ğ°Ğ½Ğ¸Ñ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸
    debug: Bool = false                // Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ‚ĞµÑÑ‚Ğ¾Ğ²Ñ‹Ğµ ĞºĞ»ÑÑ‡Ğ¸
)
```

#### Ğ¢Ğ¸Ğ¿Ñ‹ Ñ€ĞµĞºĞ»Ğ°Ğ¼Ñ‹

```swift
struct AdType: OptionSet {
    static let interstitial  // ĞŸĞ¾Ğ»Ğ½Ğ¾ÑĞºÑ€Ğ°Ğ½Ğ½Ğ°Ñ Ñ€ĞµĞºĞ»Ğ°Ğ¼Ğ°
    static let rewarded      // Ğ ĞµĞºĞ»Ğ°Ğ¼Ğ° Ñ Ğ½Ğ°Ğ³Ñ€Ğ°Ğ´Ğ¾Ğ¹
    static let appOpen       // Ğ ĞµĞºĞ»Ğ°Ğ¼Ğ° Ğ¿Ñ€Ğ¸ Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚Ğ¸Ğ¸ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ
    static let all           // Ğ’ÑĞµ Ñ‚Ğ¸Ğ¿Ñ‹
    static let none          // ĞĞ¸Ñ‡ĞµĞ³Ğ¾ Ğ½Ğµ Ğ¶Ğ´Ğ°Ñ‚ÑŒ
}
```

#### ĞŸĞ¾ĞºĞ°Ğ· Ñ€ĞµĞºĞ»Ğ°Ğ¼Ñ‹

```swift
guard let ads = HubSDKCore.shared.googleAds else { return }

// Interstitial
if ads.isInterstitialReady {
    await ads.showInterstitial(from: viewController)
}

// Rewarded
if ads.isRewardedReady {
    let rewarded = await ads.showRewarded(from: viewController)
    if rewarded {
        // Ğ’Ñ‹Ğ´Ğ°Ñ‚ÑŒ Ğ½Ğ°Ğ³Ñ€Ğ°Ğ´Ñƒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
        giveReward()
    }
}

// App Open (Ğ¾Ğ±Ñ‹Ñ‡Ğ½Ğ¾ Ğ² sceneDidBecomeActive)
if ads.isAppOpenReady {
    await ads.showAppOpen()
}

// Banner
let banner = ads.createBanner(in: viewController, size: AdSizeBanner)
view.addSubview(banner)
```

#### Callback API

```swift
// Ğ•ÑĞ»Ğ¸ Ğ½ÑƒĞ¶ĞµĞ½ callback Ğ²Ğ¼ĞµÑÑ‚Ğ¾ async/await
ads.showRewarded(from: viewController) { rewarded in
    if rewarded {
        self.giveReward()
    }
}
```

---

### HubSDKAdapty

Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ñ Adapty Ğ´Ğ»Ñ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞ°Ğ¼Ğ¸ Ğ¸ paywall.

#### ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ

```swift
StormSDKAdaptyConfiguration(
    apiKey: String,                           // Public API Key Ğ¸Ğ· Adapty Dashboard
    placementIdentifers: [String],            // ID Ğ¿Ğ»ĞµĞ¹ÑĞ¼ĞµĞ½Ñ‚Ğ¾Ğ² Ğ´Ğ»Ñ Ğ¿Ñ€ĞµĞ´Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸
    accessLevels: [AccessLevel],              // Ğ£Ñ€Ğ¾Ğ²Ğ½Ğ¸ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ° Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ¸
    storeKitVersion: StoreKitVersion = .v1,   // Ğ’ĞµÑ€ÑĞ¸Ñ StoreKit
    logLevel: AdaptyLog.Level = .verbose,     // Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ
    chinaClusterEnable: Bool = true,          // ĞšĞ¸Ñ‚Ğ°Ğ¹ÑĞºĞ¸Ğ¹ ĞºĞ»Ğ°ÑÑ‚ĞµÑ€
    fallbackName: String? = nil,              // Ğ˜Ğ¼Ñ fallback JSON Ñ„Ğ°Ğ¹Ğ»Ğ°
    languageCode: String = Locale.current.identifier
)
```

#### Ğ£Ñ€Ğ¾Ğ²Ğ½Ğ¸ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ°

```swift
enum AccessLevel {
    case premium                    // Ğ¡Ñ‚Ğ°Ğ½Ğ´Ğ°Ñ€Ñ‚Ğ½Ñ‹Ğ¹ "premium"
    case custom(String)             // ĞšĞ°ÑÑ‚Ğ¾Ğ¼Ğ½Ñ‹Ğ¹ ÑƒÑ€Ğ¾Ğ²ĞµĞ½ÑŒ
}
```

#### ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞ¸

```swift
guard let adapty = HubSDKCore.shared.adapty else { return }

// Ğ‘Ñ‹ÑÑ‚Ñ€Ğ°Ñ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° (ĞºÑÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ¾Ğµ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ)
if adapty.hasActiveSubscription {
    showPremiumContent()
}

// ĞŸĞ¾Ğ»Ğ½Ğ°Ñ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ñ ÑĞµÑ€Ğ²ĞµÑ€Ğ°
let entry = await adapty.validateSubscription(for: [.premium])
if entry.isActive {
    print("Subscription active, will renew: \(entry.isRenewable)")
}
```

#### ĞŸĞ¾ĞºĞ°Ğ· Paywall

```swift
// ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ placement
if let entry = adapty.placementEntry(with: "onboarding") {
    switch entry.identifier {
    case .builder:
        // Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ Adapty Paywall Builder
        showBuilderPaywall(entry: entry)
    case .local(let identifier):
        // Ğ›Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ paywall
        showLocalPaywall(identifier: identifier, products: entry.products)
    }
}

// Ğ˜Ğ»Ğ¸ Ñ‡ĞµÑ€ĞµĞ· HubPaywallPresenter
let presenter = HubPaywallPresenter(
    sdk: adapty,
    localPaywallProvider: myPaywallProvider
)
presenter.delegate = self

try await presenter.showPaywall(
    placementId: "onboarding",
    from: viewController,
    config: HubPaywallPresentConfiguration(
        presentType: .present,
        animationEnable: true,
        dissmissEnable: true
    )
)
```

#### ĞŸĞ¾ĞºÑƒĞ¿ĞºĞ° Ğ¸ Ğ²Ğ¾ÑÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ

```swift
// ĞŸĞ¾ĞºÑƒĞ¿ĞºĞ°
do {
    let result = try await adapty.purchase(with: product)
    if result.isPurchaseSuccess {
        print("Purchase successful!")
    }
} catch {
    print("Purchase failed: \(error)")
}

// Ğ’Ğ¾ÑÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾ĞºÑƒĞ¿Ğ¾Ğº
do {
    let entry = try await adapty.restore(for: [.premium])
    if entry.isActive {
        print("Purchases restored!")
    }
} catch {
    print("Restore failed: \(error)")
}
```

#### Remote Config

```swift
// Ğ¢Ğ¸Ğ¿Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ remote config
struct OnboardingConfig: Codable, Sendable {
    let title: String
    let features: [String]
    let showTrial: Bool
}

if let config: OnboardingConfig = adapty.remoteConfig(for: "onboarding") {
    print("Title: \(config.title)")
}
```

---

### HubSkarb

Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ ÑĞ¾ Skarb Ğ´Ğ»Ñ Ğ°Ğ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ¸.

#### ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ

```swift
HubSkarbConfiguration(
    clientId: String,           // Skarb Client ID
    observerMode: Bool = true   // Observer mode
)
```

#### ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ

Skarb Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚ conversion data Ğ¾Ñ‚ AppsFlyer Ñ‡ĞµÑ€ĞµĞ· Event Bus â€” Ğ´Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ°Ñ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° Ğ½Ğµ Ñ‚Ñ€ĞµĞ±ÑƒĞµÑ‚ÑÑ.

#### Ğ ÑƒÑ‡Ğ½Ğ°Ñ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

```swift
if let skarb = HubSDKCore.shared.integration(ofType: HubSkarbIntegration.self)?.provider {
    skarb.sendSource(
        broker: .appsflyer,
        features: ["campaign": "summer_sale"],
        brokerUserID: "user123"
    )
}
```

---

## ğŸ”„ Event Bus

ĞœĞ¾Ğ´ÑƒĞ»Ğ¸ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ¾Ğ±Ğ¼ĞµĞ½Ğ¸Ğ²Ğ°ÑÑ‚ÑÑ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼Ğ¸ Ñ‡ĞµÑ€ĞµĞ· `StormEventBus`.

### Ğ”Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹Ğµ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ

```swift
enum StormEvent {
    case conversionDataReceived([String: String])  // Ğ”Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ°Ñ‚Ñ€Ğ¸Ğ±ÑƒÑ†Ğ¸Ğ¸
    case successPurchase                            // Ğ£ÑĞ¿ĞµÑˆĞ½Ğ°Ñ Ğ¿Ğ¾ĞºÑƒĞ¿ĞºĞ°
}
```

### ĞŸĞ¾Ğ´Ğ¿Ğ¸ÑĞºĞ° Ğ½Ğ° ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ

```swift
class MyAnalytics: StormEventListener {
    init() {
        StormEventBus.shared.subscribe(self)
    }
    
    deinit {
        StormEventBus.shared.unsubscribe(self)
    }
    
    func handle(event: StormEvent) {
        switch event {
        case .conversionDataReceived(let data):
            trackInstall(source: data["media_source"])
        case .successPurchase:
            trackPurchase()
        }
    }
}
```

---

## ğŸ—ï¸ ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Your App                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      HubSDKCore                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  register() â†’ run() â†’ waitUntilReady()                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚                     â”‚                     â”‚
â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
â”‚ HubApps â”‚          â”‚ HubGoogle â”‚         â”‚ HubSDK  â”‚
â”‚ flyer   â”‚          â”‚ Ads       â”‚         â”‚ Adapty  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚                     â”‚                     â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚                     â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
         â”‚ StormEvent  â”‚       â”‚   HubSkarb  â”‚
         â”‚    Bus      â”‚â—„â”€â”€â”€â”€â”€â”€â”‚             â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âš ï¸ ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº

SDK Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ Ñ‚Ğ¸Ğ¿Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸ `HubSDKError`:

```swift
do {
    try await adapty.purchase(with: product)
} catch let error as HubSDKError {
    switch error {
    case .notInitialized:
        print("SDK not ready")
    case .purchaseCancelled:
        print("User cancelled")
    case .purchaseFailed(let underlyingError):
        print("Purchase failed: \(underlyingError)")
    case .networkError:
        print("Check internet connection")
    default:
        print(error.localizedDescription)
    }
    
    // Ğ£Ğ´Ğ¾Ğ±Ğ½Ñ‹Ğµ ÑĞ²Ğ¾Ğ¹ÑÑ‚Ğ²Ğ°
    if error.isRetryable {
        // ĞŸĞ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ ĞºĞ½Ğ¾Ğ¿ĞºÑƒ "ĞŸĞ¾Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ñ‚ÑŒ"
    }
    
    if error.isUserFacing {
        showAlert(message: error.userFriendlyMessage)
    }
}
```

---

## ğŸ“‹ Ğ¢Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

- iOS 15.0+
- Swift 6.0+
- Xcode 16.0+

---

## ğŸ“„ Ğ›Ğ¸Ñ†ĞµĞ½Ğ·Ğ¸Ñ

MIT License. Ğ¡Ğ¼. [LICENSE](LICENSE) Ğ´Ğ»Ñ Ğ´ĞµÑ‚Ğ°Ğ»ĞµĞ¹.
